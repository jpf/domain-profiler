<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title><%= list_name %></title>
<meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8" />
<meta name="robots" content="index, follow" />
<meta name="author" content="Joel Franusic" />
<link rel="stylesheet" href="public/style.css" media="screen,projection" type="text/css" />
<script src="public/sorttable.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-421255-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body>
<div id="container">

  <h1>Chart of <%= list_name %> companies' hosting decisions, 2011 edition</h1>
  <div id="note">
    Generated by <a href="https://github.com/jpf">Joel</a> on <%= Time.now.strftime('%Y-%m-%d') %> using his <a href="http://github.com/jpf/domain-profiler/tree/master">domain-profiler</a> software. Patches welcome.
  </div>
  <div id="charts">
  <% charts.each do |chart| %>
  <img src="<%= chart[:url] %>"/>
  <% end %>
  </div>

  <div id="data">
  <table class="sortable" border="1">
    <tr>
      <th>Domain</th>
      <% types.each do |type| %>
      <th><%= full_name[type] %></th>
      <% end %>
    </tr>
    <% hosts.each do |domain,data| %>
    <tr>
      <td><%= domain %></td>
    <% types.each do |type| %>
      <td><%= data[type].map{|i| if i.is_a? String; "\"#{i}\"" ; else x = fullname(i); end}.join(', ') %></td>
      <% end %>
    </tr>
    <% end %>
  </table>
  </div>
</div><!-- container -->
</body>
</html>
